name = "agent-browser"
type = "module"
main = "dist/worker-simple.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Environment variables for all environments
[env.default]
vars = { AGENT_BROWSER_HEADLESS = "true", AGENT_BROWSER_ENABLE_PLUGINS = "true" }

[env.production]
name = "agent-browser-prod"
routes = [
  { pattern = "api.agent-browser.com/*", zone_name = "agent-browser.com" }
]
vars = { AGENT_BROWSER_HEADLESS = "true", AGENT_BROWSER_ENABLE_PLUGINS = "true", AGENT_BROWSER_LOG_LEVEL = "info" }

[env.staging]
name = "agent-browser-staging"
vars = { AGENT_BROWSER_HEADLESS = "true", AGENT_BROWSER_ENABLE_PLUGINS = "true", AGENT_BROWSER_LOG_LEVEL = "debug" }

[env.development]
name = "agent-browser-dev"
vars = { AGENT_BROWSER_HEADLESS = "false", AGENT_BROWSER_ENABLE_PLUGINS = "true", AGENT_BROWSER_LOG_LEVEL = "debug" }

# Build configuration
[build]
command = "npm run build"
cwd = "."

# Observability
[observability]
enabled = true
